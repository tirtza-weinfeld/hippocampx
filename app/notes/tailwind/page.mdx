import {
  ScrollbarDemo,
  FocusRingDemo,
  SurfaceDemo,
  BadgeDemo,
  GlowDemo,
  TabSizeDemo,
  BareValuesDemo,
  LiteralValuesDemo,
  ArbitraryValuesDemo,
  CombinedValuesDemo,
  NegativeValuesDemo,
  ModifiersDemo,
  FractionsDemo,
  TabsBareDemo,
  OrderDemo,
  TabModeDemo,
  VisibilityDemo,
  TabArbitraryDemo,
  SpaceDemo,
  AlphaDemo,
  IndentDemo,
  PushDemo,
  GridColsModifierDemo,
  BasisDemo,
} from '@/components/notes/tailwind'

# Tailwind 4 Custom Utilities

## Resizable Table of Contents

---

## The Core Concept

When you write `@utility foo-*`, the `*` captures whatever comes after `foo-`.

The `--value()` function tells Tailwind **how to interpret** that captured value.

```css
@utility layer-* {
  z-index: --value(???);  /* What goes here? */
}
```

There are **4 modes** for `--value()`:

| Mode | Syntax | Matches | Example |
|------|--------|---------|---------|
| Theme | `--value(--namespace-*)` | Tokens from `@theme` | `layer-high` |
| Bare | `--value(type)` | Raw CSS values | `layer-50` |
| Literal | `--value("keyword")` | Exact strings | `layer-auto` |
| Arbitrary | `--value([type])` | Bracket syntax | `layer-[999]` |

---

## 1. Theme Values — `--value(--namespace-*)`

Match against tokens defined in `@theme`:

```css
@theme {
  --tab-size-2: 2;
  --tab-size-4: 4;
  --tab-size-github: 8;
}

@utility tab-* {
  tab-size: --value(--tab-size-*);
}
```

| Class | Resolves to |
|-------|-------------|
| `tab-2` | `tab-size: 2` |
| `tab-github` | `tab-size: 8` |
| `tab-50` | Nothing (no `--tab-size-50`) |

<TabSizeDemo />

### Theme + OKLCH Relative Colors

Theme values shine when combined with relative color syntax:

```css
@theme {
  --color-surface-critical: oklch(0.55 0.22 25);
  --color-surface-success: oklch(0.55 0.18 145);
}

@utility surface-* {
  --base: --value(--color-surface-*);

  background: linear-gradient(145deg, var(--base), oklch(from var(--base) calc(l - 0.1) c h));
  color: oklch(from var(--base) calc(l + 0.45) 0.02 h);
}
```

<SurfaceDemo />

<BadgeDemo />

<GlowDemo />

---

## 2. Bare Values — `--value(type)`

Match raw values validated as a CSS data type:

```css
@utility layer-* {
  z-index: --value(integer);
}

@utility cols-* {
  column-count: --value(integer);
}
```

| Class | Resolves to |
|-------|-------------|
| `layer-10` | `z-index: 10` |
| `layer-999` | `z-index: 999` |
| `layer-foo` | Nothing (not an integer) |

**Available types:** `integer`, `number`, `ratio`, `percentage`

<BareValuesDemo />

<TabsBareDemo />

<OrderDemo />

---

## 3. Literal Values — `--value("keyword")`

Match exact CSS keywords (notice the quotes):

```css
@utility wrap-* {
  text-wrap: --value("balance", "pretty", "stable");
}

@utility clip-* {
  overflow: --value("visible", "hidden", "scroll", "auto");
}
```

| Class | Resolves to |
|-------|-------------|
| `wrap-balance` | `text-wrap: balance` |
| `clip-hidden` | `overflow: hidden` |
| `wrap-foo` | Nothing (not in the list) |

<LiteralValuesDemo />

<TabModeDemo />

<VisibilityDemo />

---

## 4. Arbitrary Values — `--value([type])`

Match bracket syntax `[value]` (notice the square brackets):

```css
@utility curve-* {
  border-radius: --value([length]);
}

@utility fade-* {
  opacity: --value([percentage]);
}
```

| Class | Resolves to |
|-------|-------------|
| `curve-[12px]` | `border-radius: 12px` |
| `curve-[1.5rem]` | `border-radius: 1.5rem` |
| `fade-[75%]` | `opacity: 75%` |
| `curve-12` | Nothing (no brackets) |

**Available types:** `length`, `percentage`, `integer`, `number`, `color`, `angle`, `url`, `*`, and more.

<ArbitraryValuesDemo />

<TabArbitraryDemo />

<SpaceDemo />

---

## 5. Combining Modes

You can support multiple modes in one utility.

### Option A: Multiple Declarations

Write separate declarations — failures are silently omitted:

```css
@utility opacity-* {
  opacity: --value(--opacity-*);        /* try theme first */
  opacity: calc(--value(integer) * 1%); /* then bare (convert to %) */
  opacity: --value([percentage]);       /* then arbitrary */
}
```

| Class | Which matches | Result |
|-------|---------------|--------|
| `opacity-50` | Theme | `opacity: 0.5` |
| `opacity-75` | Bare → calc | `opacity: 75%` |
| `opacity-[80%]` | Arbitrary | `opacity: 80%` |

### Option B: Comma-Separated Args

Single `--value()` with multiple args, resolves left-to-right:

```css
@utility indent-* {
  tab-size: --value(--tab-size-*, integer, [integer]);
}
```

First match wins.

<CombinedValuesDemo />

<AlphaDemo />

<IndentDemo />

---

## 6. Negative Values

Register separate utilities with a leading dash:

```css
@utility spin-* {
  transform: rotate(calc(--value(integer) * 1deg));
}

@utility -spin-* {
  transform: rotate(calc(--value(integer) * -1deg));
}
```

**Usage:** `spin-45`, `-spin-45`

<NegativeValuesDemo />

### Using `--spacing()` Theme Function

```css
@utility push-* {
  inset: --spacing(--value(integer));
}

@utility -push-* {
  inset: calc(--spacing(--value(integer)) * -1);
}
```

`--spacing(4)` resolves to `1rem` (4 × 0.25rem).

<PushDemo />

---

## 7. Modifiers — `--modifier()`

`--modifier()` works like `--value()` but reads from after the `/`:

```css
@utility type-* {
  font-size: --value(--text-*, [length]);
  line-height: --modifier(--leading-*, [length], [*]);
}
```

| Class | Result |
|-------|--------|
| `type-lg` | `font-size: 1.125rem` |
| `type-lg/relaxed` | `font-size: 1.125rem; line-height: 1.625` |
| `type-lg/[1.8]` | `font-size: 1.125rem; line-height: 1.8` |

<ModifiersDemo />

```css
@utility grid-cols-* {
  display: grid;
  grid-template-columns: repeat(--value(integer), minmax(0, 1fr));
  gap: --modifier([length]);
}
```

<GridColsModifierDemo />

---

## 8. Fractions — `ratio` Type

The `ratio` type treats the value as a fraction:

```css
@utility span-* {
  width: calc(--value(ratio) * 100%);
}

@utility frame-* {
  aspect-ratio: --value(--aspect-*, ratio, [ratio]);
}
```

| Class | Result |
|-------|--------|
| `span-1/2` | `width: 50%` |
| `span-2/3` | `width: 66.67%` |
| `frame-16/9` | `aspect-ratio: 16/9` |

<FractionsDemo />

<BasisDemo />

---

## 9. Complex Utilities with Nesting

Use `@utility` when you need pseudo-elements or multiple properties:

```css
@utility scrollbar-hidden {
  scrollbar-width: none;

  &::-webkit-scrollbar {
    display: none;
  }
}

@utility focus-ring-gradient {
  outline: none;

  &:focus-visible {
    box-shadow:
      0 0 0 2px oklch(0.98 0 0),
      0 0 0 4px oklch(0.65 0.2 250);
  }
}
```

<ScrollbarDemo />

<FocusRingDemo />

---

## Quick Reference

| Mode | Syntax | Example |
|------|--------|---------|
| Theme | `--value(--namespace-*)` | `--value(--color-*)` |
| Bare | `--value(type)` | `--value(integer)` |
| Literal | `--value("keyword")` | `--value("auto", "none")` |
| Arbitrary | `--value([type])` | `--value([length])` |
| Combined | `--value(a, b, c)` | `--value(--opacity-*, integer)` |
| Modifier | `--modifier(...)` | `--modifier([length])` |
| Fraction | `--value(ratio)` | `span-1/2` |

### Bare Types
`integer`, `number`, `ratio`, `percentage`

### Arbitrary Types
`length`, `percentage`, `integer`, `number`, `color`, `angle`, `url`, `position`, `bg-size`, `*`
