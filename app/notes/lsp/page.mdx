# VS Code LSP 

## resizable table of contents

## LSP, JSON Responses, Memory Model..

1. LSP (Language Server Protocol)
	â€¢	A protocol (JSON-RPC) used by editors â†”ï¸ language servers.
	â€¢	Client (VS Code) sends requests like textDocument/hover, textDocument/completion, textDocument/signatureHelp.
	â€¢	Server (Pylance, Jedi, Pyright, etc.) responds with structured JSON.
	â€¢	Each request = a message, not a file, sent over a persistent connection.

â¸»

2. JSON Responses
	â€¢	Hover â†’ markdown with signature + docstring.
	â€¢	Completion â†’ list of possible symbols/snippets.
	â€¢	SignatureHelp â†’ array of parameters[] with per-param docs.
	â€¢	Each response is formatted for the editor UI (tooltips, popups, snippets).

â¸»

3. Memory Model (inside server)
	â€¢	Before responding, the server keeps a live in-memory model of your code:
	    1.	AST (syntax tree for each file).
	    2.	Symbol table (functions, classes, variables, imports).
	    3.	Types (inferred from annotations, assignments, libraries).
	    4.	Docstrings (parsed and mapped to params/returns).
	    5.	Graphs (call graph, control-flow, references).
	â€¢	Updated incrementally as you type; thatâ€™s why responses are fast.

â¸»

4. When + Where
	â€¢	When you type a dot (obj.) â†’ VS Code sends completion; server looks in memory model, replies with possible members.
	â€¢	When you type a ( â†’ VS Code sends signatureHelp; server matches the function symbol, pulls its params + docstring, replies with structured JSON.
	â€¢	When you hover â†’ VS Code sends hover; server pulls docstring + type info, formats markdown JSON.
	â€¢	Where â†’ All this happens in VS Codeâ€™s extension host. The in-memory model lives inside the server process (e.g. Pylance). The client only ever sees the JSON response, never the internal model.

â¸»

ğŸ‘‰ So:
	â€¢	Memory model = how the server understands your code internally (AST + symbols + types).
	â€¢	JSON responses = what the server sends back, tailored to the UI.
	â€¢	When = triggered by typing or hovering.
	â€¢	Where = inside the language server process, with VS Code just acting as the front-end.


## Hereâ€™s the flow sketched out as a step-by-step diagram:

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   VS Code   â”‚
    â”‚ (the client)â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚   JSON-RPC request
           â”‚   (e.g. hover, completion, signatureHelp)
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Language   â”‚
    â”‚  Server     â”‚
    â”‚ (Pylance)   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ consults live memory model
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   In-Memory Model (server)  â”‚
â”‚  â€¢ AST (syntax trees)       â”‚
â”‚  â€¢ Symbols (funcs, vars)    â”‚
â”‚  â€¢ Types (inferred + hints) â”‚
â”‚  â€¢ Docstrings (parsed)      â”‚
â”‚  â€¢ Graphs (call / CFG)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ packages results
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ JSON Result â”‚
    â”‚ (Hover â†’ md â”‚
    â”‚ Completion  â”‚
    â”‚ Signature   â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚ sent back over RPC
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   VS Code   â”‚
    â”‚  shows UI   â”‚
    â”‚  (tooltip,  â”‚
    â”‚  popup)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â¸»

âœ¨ Summary of flow
â€¢	Editor action: hover / type / call â†’
â€¢	Client sends LSP request â†’
â€¢	Server uses in-memory model (AST + types + docs) â†’
â€¢	Server replies JSON â†’
â€¢	Editor renders UI (tooltips, completions, sig help).



## hereâ€™s the timeline-enhanced flow with â€œwhen each request happensâ€ marked:

   USER ACTION (Timeline)                 LSP REQUEST          SERVER RESPONSE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Type `obj.`   (dot) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ textDocument/completion â”€â–¶ Completion JSON
                                     (list of symbols,       (labels, snippets,
                                     docs if available)       insertText, docs)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

2. Type `(` after a function â”€â”€â”€â”€â–¶ textDocument/signatureHelp â”€â–¶ SignatureHelp JSON
                                     (signature + param docs)   (params[], activeParam,
                                                                 returns docs)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

3. Hover mouse over symbol â”€â”€â”€â”€â”€â”€â–¶ textDocument/hover â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Hover JSON
                                     (docstring, types,          (markdown signature +
                                     annotations, range)         args/returns summary)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

And all of these pass through the same memory model inside Pylance:

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   In-Memory Model           â”‚
   â”‚  â€¢ AST (syntax trees)       â”‚
   â”‚  â€¢ Symbols (funcs, vars)    â”‚
   â”‚  â€¢ Types (annotations + infer)
   â”‚  â€¢ Docstrings (parsed)      â”‚
   â”‚  â€¢ Graphs (call/CFG)        â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â¸»

âœ¨ So in timeline form:
	â€¢	Completion â†’ when you type a dot.
	â€¢	SignatureHelp â†’ when you open parens in a call.
	â€¢	Hover â†’ when you mouse over a symbol.

Each request â†’ LSP JSON built from the serverâ€™s live in-memory model â†’ VS Code shows tooltip/snippet/help popup.

â¸»

