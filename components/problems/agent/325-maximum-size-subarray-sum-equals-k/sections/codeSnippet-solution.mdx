```python meta="source=problems/325-maximum-size-subarray-sum-equals-k/solution.py"
def maxSizeSubarraySumEqualsK(segments: list[int], k: int) -> int:

    marker_idx = {0: -1}
    prefix_sum = max_length = 0

    for i, segment in enumerate(segments):

        prefix_sum += segment

        if (target_marker := prefix_sum - k) in marker_idx:
            max_length = max(max_length, i - marker_idx[target_marker])

        if prefix_sum not in marker_idx:
            marker_idx[prefix_sum] = i

    return max_length
```