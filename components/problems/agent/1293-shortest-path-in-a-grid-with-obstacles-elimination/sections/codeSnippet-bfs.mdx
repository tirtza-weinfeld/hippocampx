```python meta="source=problems/1293-shortest-path-in-a-grid-with-obstacles-elimination/bfs.py"
from collections import deque

def shortest_path_in_a_grid_with_obstacles_elimination(grid: list[list[int]], k: int) -> int:

    rows, cols = len(grid), len(grid[0])
    min_steps = rows + cols - 3 
    if k >= min_steps:
        return min_steps

    max_k = [[-1] * cols for _ in range(rows)]
    max_k[0][0] = k

    q = deque([(0, 0, 0, k)])

    while q:
        r, c, steps, remaining_k = q.popleft()
        for dr, dc in [(1,0), (-1,0), (0,1), (0,-1)]:
            nr, nc = r + dr, c + dc
            if 0 <= nr < rows and 0 <= nc < cols:
                new_remaining_k = remaining_k - grid[nr][nc]
                if new_remaining_k > max_k[nr][nc]:
                    if (nr, nc) == (rows - 1, cols - 1):
                        return steps + 1
                    max_k[nr][nc] = new_remaining_k
                    q.append((nr, nc, steps + 1, new_remaining_k))
    return -1
```