```python meta="source=problems/46-permutations/solution.py"
def permutations(nums: list[int]) -> list[list[int]]:

    result, n = [], len(nums)

    def dfs(i):

        if i == n:
            result.append(nums[:])
        else:
            for j in range(i, n):
                nums[i], nums[j] = nums[j], nums[i]
                dfs(i + 1)
                nums[j], nums[i] = nums[i], nums[j]

    dfs(0)
    return result
```