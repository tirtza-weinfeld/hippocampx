```python meta="source=problems/198-house-robber/top-down.py"
def rob(houses: list[int]) -> int:

    memo = {}
    def dp(i: int) -> int:
        if i >= len(houses):
            return 0
        if i not in memo:
            memo[i] = max(dp(i + 1), houses[i] + dp(i + 2))
        return memo[i]

    return dp(0)
```