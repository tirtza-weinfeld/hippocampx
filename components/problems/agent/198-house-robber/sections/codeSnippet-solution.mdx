```python meta="source=problems/198-house-robber/solution.py"
def rob(houses: list[int]) -> int:
    memo = {}
    def dp(h):
        if h >= len(houses):
            return 0
        if h not in memo:
            memo[h] = max(houses[h] + dp(h + 2), dp(h + 1))
        return memo[h]
    return dp(0)
```