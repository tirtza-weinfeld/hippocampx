```python meta="source=problems/547-number-of-provinces/solution.py"
class Solution:
    def findCircleNum(self, isConnected: list[list[int]]) -> int:
        p = list(range(n := len(isConnected)))

        def union(a, b):
            p[find(a)] = find(b)

        def find(x):
            while x != p[x]:
                p[x] = p[p[x]]
                x = p[x]
            return x

        for i in range(n):
            for j in range(i + 1, n):
                if isConnected[i][j]:
                    union(i, j)

        return sum(i == find(i) for i in range(n))
```