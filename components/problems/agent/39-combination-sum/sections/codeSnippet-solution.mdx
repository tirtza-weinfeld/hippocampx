```python meta="source=problems/39-combination-sum/solution.py"
def combination_sum(candidates: list[int], target: int) -> list[list[int]]:

    candidates.sort()
    res, path = [], []

    def dfs(i: int, rem: int) -> None:
        if rem == 0:
            res.append(path.copy())
            return
        for j in range(i, len(candidates)):
            if (c := candidates[j]) > rem:
                break
            path.append(c)
            dfs(j, rem - c)
            path.pop()

    dfs(0, target)
    return res
```