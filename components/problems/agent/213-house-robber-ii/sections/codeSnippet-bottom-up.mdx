```python meta="source=problems/213-house-robber-ii/bottom-up.py"
def circularRob(houses: list[int]) -> int:
    if len(houses) == 1:
        return houses[0]
    return max(rob(houses[:-1]), rob(houses[1:]))

def circularRob(houses: list[int]) -> int:
    if len(houses) == 1:
        return houses[0]
    # compute two linear cases and choose max
    return max(rob(houses[:-1]), rob(houses[1:]))

# 198
def rob(houses: list[int]) -> int:
    h1, h2 = 0, 0
    for h in houses:
        h2, h1 = h1, max(h1, h2 + h)
    return h1
```