```python meta="source=problems/213-house-robber-ii/top-down.py"
def circularRob(houses: list[int]) -> int:
    if len(houses) == 1:
        return houses[0]
    return max(rob(houses[:-1]), rob(houses[1:]))

# 213. House Robber I â€” top-down
def rob(houses: list[int]) -> int:
    memo = {}

    def dp(h):
        if h >= len(houses):
            return 0
        if h not in memo:
            memo[h] = max(dp(h + 1), houses[h] + dp(h + 2))
        return memo[h]

    return dp(0)
```