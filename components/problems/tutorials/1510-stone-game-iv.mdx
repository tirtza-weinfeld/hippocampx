# Stone Game IV

## Resizable Table Of contents

<DifficultyBadge difficulty="hard" />

<PillList pills={["dynamic-programming", "game"]} />

[1510. Stone Game IV](https://leetcode.com/problems/stone-game-iv)

## [!ProblemDefinition] Definition

Alice and Bob alternately take turns removing a perfect square from the board. The first player to have no moves loses. Return True if Alice wins, False otherwise.

## [!ProblemIntuition] Intuition

- Minimax:
    - *Paradigm*: This is a classic *impartial game* solved using the *Minimax* principle on game states.
    - *Insight*: A position is defined as *winning* if you can make *any* move to a position that you know is *losing* for your opponent. The DP builds this win/loss classification for every number of stones up to `n`, starting from the base case that 0 stones is a losing position.

## [!ProblemTimeComplexity] Time Complexity

- $O(n * $\sqrt{n}$$):
    - try all squares for each `x`

## [!ProblemCodeSnippet] Code Snippet

```python meta="source=problems/1510-stone-game-iv/solution.py"
def stone_game_IV(n: int) -> bool:

    memo = {0: False}

    def dp(n):
        if n not in memo:
            memo[n] = any(not dp(n - i**2) for i in range(int(n**0.5), 0, -1))
        return memo[n]

    return dp(n)
```

