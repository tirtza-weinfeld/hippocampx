# Longest Repeating Character Replacement

## Resizable Table Of contents

<DifficultyBadge difficulty="medium" />

<PillList pills={["sliding-window", "hash-table"]} />

[424. Longest Repeating Character Replacement](https://leetcode.com/problems/longest-repeating-character-replacement/description/)

## [!(ProblemDefinition)] Definition

given a string `s` and an integer `k`. You can choose any character of the string and change it to any other uppercase English character.
    You can perform this operation at most `k` times.
    Return the length of the longest substring containing the same letter you can get after performing the above operations.

## [!(ProblemIntuition)] Intuition

- Sliding window with monotonic max_freq (can be stale).

- Example:
    - `s="BBBBAABAACADAACCCC"; k=3`
    - max valid window: indices *4...13* *(len=10)*, `AABAACADAA`
    - final `l=8` -> final window indices *8...17* *(len=10)*, invalid because `max_freq`             is stale; length is still correct since `r` only increases and `l` moves at most             once per `r`, so `r-l` never decreases.

## [!(ProblemCodeSnippet)] Code Snippet

```python meta="source=problems/424-longest-repeating-character-replacement/solution.py"
from collections import defaultdict

def characterReplacement(s: str, k: int) -> int:
    counts = defaultdict(int)
    max_freq = l = 0
    for r, c in enumerate(s):
        counts[c] += 1
        max_freq = max(max_freq, counts[c])
        if (r - l + 1) - max_freq > k:
            counts[s[l]] -= 1
            l += 1
    return len(s) - l
```

