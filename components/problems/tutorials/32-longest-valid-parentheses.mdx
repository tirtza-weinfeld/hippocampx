# Longest Valid Parentheses

## Resizable Table Of contents

<DifficultyBadge difficulty="hard" />

<PillList pills={["stack"]} />

[32. Longest Valid Parentheses](https://leetcode.com/problems/longest-valid-parentheses/)

## [!(ProblemDefinition)] Definition

Given a string containing just the characters `(` and `)`, return the length of the longest valid (well-formed) parentheses substring

## [!(ProblemIntuition)] Intuition

- Use a stack of indices to mark positions that cannot be crossed by a valid parentheses substring
- Push indices of `(`
- When a `)` arrives, pop to match it;
    - if the stack becomes empty, this `)` is unmatched and becomes the new base.
    - Otherwise, the current valid length is the distance from the current index to the last unmatched position (`i - stack[-1]`)
        - The maximum such distance is the answer.

## [!(ProblemCodeSnippet)] Code Snippet

```python meta="source=problems/32-longest-valid-parentheses/solution.py"
class Solution:
    def longestValidParentheses(self, s: str) -> int:
        stack = [-1]
        max_length = 0
        for i, c in enumerate(s):
            if c == "(":
                stack.append(i)
            else:
                stack.pop()
                if not stack:
                    stack.append(i)
                else:
                    max_length = max(max_length, i - stack[-1])
        return max_length
```

