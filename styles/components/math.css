/* ==========================================================================
   KaTeX Math Styling
   Colors handled via data-step attribute (set in math-renderer.tsx)
   which step.css maps to --step variable
   ========================================================================== */

/* --------------------------------------------------------------------------
   Default Step Colors
   -------------------------------------------------------------------------- */

/* Default math: gray */
:root .katex { --step: var(--color-blue-600) }
.dark .katex { --step: var(--color-blue-300) }

/* Em/Strong WITHOUT data-step: sky (matches text-em-gradient/bg-strong-gradient) */
:where(em:not([data-step]), strong:not([data-step])) .katex { --step: var(--color-sky-500) }

/* Inside [data-step]: inherit from parent (step.css sets --step on [data-step] elements) */
[data-step] .katex:not([data-step]) { --step: inherit }


/* --------------------------------------------------------------------------
   SVG Elements: Apply step color to vector graphics
   -------------------------------------------------------------------------- */

.katex svg * {
  color: var(--step);
}

/* --------------------------------------------------------------------------
   Base KaTeX Styles
   -------------------------------------------------------------------------- */

.katex {
  font-size: 1.1em;
  background: transparent;
  display: inline-block;

  /* Gradient text - only on content elements, not structural/layout */
  :where(.mord, .mop, .mrel, .mopen, .mclose, .mpunct, .minner, .mbin, .texttt, .textrm, .textsf) {
    background: linear-gradient(
      to right bottom,
      --alpha(var(--step) / 100%),
      --alpha(var(--step) / 90%),
      --alpha(var(--step) / 80%)
    );
    background-size: 200% 100%;
    background-position: 0% 50%;
    background-clip: text;
    color: transparent;
    
  }

  /* Structural elements: transparent bg, solid color */
  :where(.strut, .pstrut, .vlist, .vlist-t, .vlist-r, .vlist-s, .hide-tail, .rule) {
    background: transparent;
  }

  /* Fraction line: solid border color */
  .frac-line {
    border-color: var(--step);
  }
}

/* --------------------------------------------------------------------------
   Container Styles
   -------------------------------------------------------------------------- */

.katex-container {
  display: inline-flex;
  place-items: center;

  & .katex {
    vertical-align: middle;
  }
}
