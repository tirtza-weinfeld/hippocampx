
[data-step] .katex,
[data-step] .katex * {
  color: var(--step) !important;
  -webkit-text-fill-color: var(--step) !important;
}



/* Basic KaTeX styles */
.katex {
  font-size: 1.1em;
  text-rendering: auto;
}

.katex-container {
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* Fix vertical alignment */
.katex-container .katex {
  vertical-align: middle;
}




/* Handle KaTeX inside specific parent elements (Strong, Em, Links, etc.) */
/* Only override colors when KaTeX doesn't have explicit color styling */
em .katex:not([style*="color"]),
em .katex *:not([style*="color"]),
strong .katex:not([style*="color"]),
strong .katex *:not([style*="color"]),
span .katex:not([style*="color"]),
span .katex *:not([style*="color"]),
div .katex:not([style*="color"]),
div .katex *:not([style*="color"]),
p .katex:not([style*="color"]),
p .katex *:not([style*="color"]),
a .katex:not([style*="color"]),
a .katex *:not([style*="color"]) {
  /* Ensure math content is visible and properly styled */
  color: inherit !important;
  background: inherit !important;
  -webkit-text-fill-color: inherit !important;
  background-clip: inherit !important;
  -webkit-background-clip: inherit !important;
}

/* Ensure KaTeX font is preserved in headers */
h1 .katex,
h2 .katex,
h3 .katex,
h4 .katex,
h5 .katex,
h6 .katex {
  font-family: KaTeX_Main, "Times New Roman", serif !important;
  color: inherit !important;
}

/* Ensure math code elements generated by remark-math/rehype-katex are visible */
/* Higher specificity to override Tailwind color classes in headers, but preserve KaTeX colors */
h1 code.language-math:not([style*="color"]),
h2 code.language-math:not([style*="color"]),
h3 code.language-math:not([style*="color"]),
h4 code.language-math:not([style*="color"]),
h5 code.language-math:not([style*="color"]),
h6 code.language-math:not([style*="color"]),
h1 .math-inline:not([style*="color"]),
h2 .math-inline:not([style*="color"]),
h3 .math-inline:not([style*="color"]),
h4 .math-inline:not([style*="color"]),
h5 .math-inline:not([style*="color"]),
h6 .math-inline:not([style*="color"]),
h1 span code.language-math:not([style*="color"]),
h2 span code.language-math:not([style*="color"]),
h3 span code.language-math:not([style*="color"]),
h4 span code.language-math:not([style*="color"]),
h5 span code.language-math:not([style*="color"]),
h6 span code.language-math:not([style*="color"]),
h1 span .math-inline:not([style*="color"]),
h2 span .math-inline:not([style*="color"]),
h3 span .math-inline:not([style*="color"]),
h4 span .math-inline:not([style*="color"]),
h5 span .math-inline:not([style*="color"]),
h6 span .math-inline:not([style*="color"]) {
  color: inherit !important;
  font-family: KaTeX_Main, "Times New Roman", serif !important;
  background: transparent !important;
  border: none !important;
  padding: 0 !important;
  font-size: inherit !important;
}

/* Fix any gradient text issues with math in headers, but preserve KaTeX colors */
h1 code.language-math *:not([style*="color"]),
h2 code.language-math *:not([style*="color"]),
h3 code.language-math *:not([style*="color"]),
h4 code.language-math *:not([style*="color"]),
h5 code.language-math *:not([style*="color"]),
h6 code.language-math *:not([style*="color"]),
h1 .math-inline *:not([style*="color"]),
h2 .math-inline *:not([style*="color"]),
h3 .math-inline *:not([style*="color"]),
h4 .math-inline *:not([style*="color"]),
h5 .math-inline *:not([style*="color"]),
h6 .math-inline *:not([style*="color"]),
h1 span code.language-math *:not([style*="color"]),
h2 span code.language-math *:not([style*="color"]),
h3 span code.language-math *:not([style*="color"]),
h4 span code.language-math *:not([style*="color"]),
h5 span code.language-math *:not([style*="color"]),
h6 span code.language-math *:not([style*="color"]),
h1 span .math-inline *:not([style*="color"]),
h2 span .math-inline *:not([style*="color"]),
h3 span .math-inline *:not([style*="color"]),
h4 span .math-inline *:not([style*="color"]),
h5 span .math-inline *:not([style*="color"]),
h6 span .math-inline *:not([style*="color"]) {
  -webkit-text-fill-color: inherit !important;
  background-clip: inherit !important;
  -webkit-background-clip: inherit !important;
  color: inherit !important;
}

/* Force KaTeX output in inline math to inherit parent styles, but preserve explicit colors */
.inline-math-katex:not([style*="color"]),
.inline-math-katex *:not([style*="color"]),
.inline-math-katex .mord:not([style*="color"]),
.inline-math-katex .mord *:not([style*="color"]),
.inline-math-katex .mtext:not([style*="color"]),
.inline-math-katex .mtext *:not([style*="color"]),
.inline-math-katex svg:not([style*="color"]),
.inline-math-katex svg *:not([style*="color"]) {
  color: inherit !important;
  fill: currentColor !important;
  stroke: currentColor !important;
}

/* Fix KaTeX transparency issues in TOC on hover */
/* .table-of-contents .katex,
nav[aria-label="Table of Contents"] .katex {
  color: inherit !important;
  opacity: 1 !important;
  -webkit-text-fill-color: inherit !important;
  background-clip: inherit !important;
  -webkit-background-clip: inherit !important;
} */

/* Ensure hover states don't break KaTeX */
/* *:hover .katex,
*:focus .katex {
  opacity: 1 !important;
  color: inherit !important;
  -webkit-text-fill-color: inherit !important;
}
 */

/* Apply step colors to KaTeX math inside stepped elements */
/* strong[data-step] .katex,
em[data-step] .katex {
  color: inherit;
} */


