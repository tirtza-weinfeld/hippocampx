/**
 * ER Diagram CSS Tokens
 *
 * Usage with Tailwind:
 *   bg-er-entity
 *   text-er-header
 *   border-er-border
 *   stroke-er-relation
 */

@theme inline {
  --color-er-entity: var(--er-entity);
  --color-er-entity-header: var(--er-entity-header);
  --color-er-border: var(--er-border);
  --color-er-text: var(--er-text);
  --color-er-text-muted: var(--er-text-muted);
  --color-er-pk: var(--er-pk);
  --color-er-pk-text: var(--er-pk-text);
  --color-er-fk: var(--er-fk);
  --color-er-fk-text: var(--er-fk-text);
  --color-er-uk: var(--er-uk);
  --color-er-uk-text: var(--er-uk-text);
  --color-er-relation: var(--er-relation);
  --color-er-relation-highlight-fk: var(--er-relation-highlight-fk);
  --color-er-relation-highlight-pk: var(--er-relation-highlight-pk);
  --color-er-comment: var(--er-comment);
  --color-er-example: var(--er-example);

  --color-er-domain-0: var(--er-domain-0);
  --color-er-domain-1: var(--er-domain-1);
  --color-er-domain-2: var(--er-domain-2);
  --color-er-domain-3: var(--er-domain-3);
  --color-er-domain-4: var(--er-domain-4);
  --color-er-domain-5: var(--er-domain-5);

  --shadow-er-table: var(--shadow-sm);
  --shadow-er-table-hover: var(--shadow-lg);
}

:root {
  --er-entity: var(--color-white);
  --er-entity-header: var(--color-gray-100);
  --er-border: var(--color-gray-300);
  --er-text: var(--color-gray-800);
  --er-text-muted: var(--color-gray-500);
  --er-pk: var(--color-amber-100);
  --er-pk-text: var(--color-amber-800);
  --er-fk: var(--color-blue-100);
  --er-fk-text: var(--color-blue-800);
  --er-uk: var(--color-purple-100);
  --er-uk-text: var(--color-purple-800);
  --er-relation: var(--color-gray-500);
  --er-relation-highlight-fk: var(--color-blue-500);
  --er-relation-highlight-pk: var(--color-orange-500);
  --er-comment: var(--color-gray-600);
  --er-example: var(--color-emerald-700);



  --er-domain-0: var(--color-blue-500);
  --er-domain-1: var(--color-emerald-500);
  --er-domain-2: var(--color-violet-500);
  --er-domain-3: var(--color-orange-500);
  --er-domain-4: var(--color-pink-500);
  --er-domain-5: var(--color-amber-500);

  /* Layout sizing (unitless for SVG calculations) */
  --er-table-width: 200;
  --er-row-height: 24;
  --er-header-height: 32;
  --er-table-gap: 16;
  --er-domain-padding: 16;
  --er-domain-title-height: 24;
  --er-domain-gap: 20;
  --er-canvas-padding: 24;
}

.dark {
  --er-entity: var(--color-gray-800);
  --er-entity-header: var(--color-gray-900);
  --er-border: var(--color-gray-600);
  --er-text: var(--color-gray-100);
  --er-text-muted: var(--color-gray-400);
  --er-pk: oklch(from var(--color-amber-900) l c h / 40%);
  --er-pk-text: var(--color-amber-300);
  --er-fk: oklch(from var(--color-blue-900) l c h / 40%);
  --er-fk-text: var(--color-blue-300);
  --er-uk: oklch(from var(--color-purple-900) l c h / 40%);
  --er-uk-text: var(--color-purple-300);
  --er-relation: var(--color-gray-400);
  --er-relation-highlight-fk: var(--color-blue-400);
  --er-relation-highlight-pk: var(--color-orange-400);
  --er-comment: var(--color-gray-400);
  --er-example: var(--color-emerald-400);

  --er-domain-0: var(--color-blue-400);
  --er-domain-1: var(--color-emerald-400);
  --er-domain-2: var(--color-violet-400);
  --er-domain-3: var(--color-orange-400);
  --er-domain-4: var(--color-pink-400);
  --er-domain-5: var(--color-amber-400);
}

/* Table states via data attributes */
:is([data-er-table]) {
  transition: transform 200ms ease-out, box-shadow 200ms ease-out;
  box-shadow: var(--shadow-er-table);
}

:is([data-er-table][data-highlighted="true"]),
:is([data-er-table][data-selected="true"]) {
  transform: scale(1.02);
  box-shadow: var(--shadow-er-table-hover);
}

:is([data-er-table][data-selected="true"]) {
  outline: 2px solid var(--er-pk);
  outline-offset: 2px;
}

/* Relationship line states */
:is([data-er-relation]) {
  stroke: var(--er-relation);
  stroke-width: 2;
  fill: none;
  transition: stroke-width 200ms ease-out, opacity 200ms ease-out;
}

:is([data-er-relation][data-highlight-mode="fk"]) {
  stroke-width: 3;
  stroke: var(--er-relation-highlight-fk);
}

:is([data-er-relation][data-highlight-mode="pk"]) {
  stroke-width: 3;
  stroke: var(--er-relation-highlight-pk);
}

/* Fill colors for markers */
.fill-er-relation {
  fill: var(--er-relation);
}

.fill-er-relation-highlight-fk {
  fill: var(--er-relation-highlight-fk);
}

.fill-er-relation-highlight-pk {
  fill: var(--er-relation-highlight-pk);
}

/* Row highlight gradients */
.er-row-highlight-pk {
  background: linear-gradient(90deg,
    oklch(from var(--color-orange-200) l c h / 0.7) 0%,
    oklch(from var(--color-orange-100) l c h / 0.3) 100%
  );
}

.er-row-highlight-fk {
  background: linear-gradient(90deg,
    oklch(from var(--color-blue-100) l c h / 0.3) 0%,
    oklch(from var(--color-blue-200) l c h / 0.7) 100%
  );
}

.dark .er-row-highlight-pk {
  background: linear-gradient(90deg,
    oklch(from var(--color-orange-900) l c h / 0.5) 0%,
    oklch(from var(--color-orange-800) l c h / 0.2) 100%
  );
}

.dark .er-row-highlight-fk {
  background: linear-gradient(90deg,
    oklch(from var(--color-blue-800) l c h / 0.2) 0%,
    oklch(from var(--color-blue-900) l c h / 0.5) 100%
  );
}

/* Canvas states */
:is([data-er-canvas]) {
  cursor: grab;
}

:is([data-er-canvas][data-dragging="true"]) {
  cursor: grabbing;
}

/* Domain boxes */
:is([data-er-domain]) {
  stroke-dasharray: 8 4;
  stroke-width: 2;
}

:is([data-er-domain="0"]) {
  fill: oklch(from var(--er-domain-0) l c h / 8%);
  stroke: oklch(from var(--er-domain-0) l c h / 30%);
}

:is([data-er-domain="1"]) {
  fill: oklch(from var(--er-domain-1) l c h / 8%);
  stroke: oklch(from var(--er-domain-1) l c h / 30%);
}

:is([data-er-domain="2"]) {
  fill: oklch(from var(--er-domain-2) l c h / 8%);
  stroke: oklch(from var(--er-domain-2) l c h / 30%);
}

:is([data-er-domain="3"]) {
  fill: oklch(from var(--er-domain-3) l c h / 8%);
  stroke: oklch(from var(--er-domain-3) l c h / 30%);
}

:is([data-er-domain="4"]) {
  fill: oklch(from var(--er-domain-4) l c h / 8%);
  stroke: oklch(from var(--er-domain-4) l c h / 30%);
}

:is([data-er-domain="5"]) {
  fill: oklch(from var(--er-domain-5) l c h / 8%);
  stroke: oklch(from var(--er-domain-5) l c h / 30%);
}

.er-domain-label-0 { fill: var(--er-domain-0); }
.er-domain-label-1 { fill: var(--er-domain-1); }
.er-domain-label-2 { fill: var(--er-domain-2); }
.er-domain-label-3 { fill: var(--er-domain-3); }
.er-domain-label-4 { fill: var(--er-domain-4); }
.er-domain-label-5 { fill: var(--er-domain-5); }
