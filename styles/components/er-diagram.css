/**
 * ER Diagram CSS Tokens
 *
 * Usage with Tailwind:
 *   bg-er-card
 *   text-er-pk
 *   border-er-border
 *   stroke-er-line
 */

@theme inline {
  --color-er-card: var(--er-card);
  --color-er-card-header: var(--er-card-header);
  --color-er-border: var(--er-border);
  --color-er-text: var(--er-text);
  --color-er-text-muted: var(--er-text-muted);
  --color-er-pk: var(--er-pk);
  --color-er-pk-soft: var(--er-pk-soft);
  --color-er-fk: var(--er-fk);
  --color-er-fk-soft: var(--er-fk-soft);
  --color-er-uk: var(--er-uk);
  --color-er-uk-soft: var(--er-uk-soft);
  --color-er-line: var(--er-line);
  --color-er-line-pk: var(--er-line-pk);
  --color-er-line-fk: var(--er-line-fk);
  --color-er-comment: var(--er-comment);
  --color-er-example: var(--er-example);
  --color-er-copy: var(--er-copy);

  --color-er-domain: var(--er-domain);

  --shadow-er-table: var(--shadow-sm);
  --shadow-er-table-hover: var(--shadow-lg);

  --animate-er-copy-flash: er-copy-flash 0.6s ease-in-out;
}

@keyframes er-copy-flash {
  0%, 100% { color: inherit; }
  30%, 70% { color: var(--er-copy); }
}

:root {
  --er-card: var(--color-white);
  --er-card-header: var(--color-gray-100);
  --er-border: var(--color-gray-300);
  --er-text: var(--color-gray-800);
  --er-text-muted: var(--color-gray-500);
  --er-pk: var(--color-amber-800);
  --er-pk-soft: var(--color-amber-100);
  --er-fk: var(--color-blue-800);
  --er-fk-soft: var(--color-blue-100);
  --er-uk: var(--color-purple-800);
  --er-uk-soft: var(--color-purple-100);
  --er-line: var(--color-gray-500);
  --er-line-pk: var(--color-orange-500);
  --er-line-fk: var(--color-blue-500);
  --er-comment: var(--color-blue-600);
  --er-example: var(--color-emerald-700);
  --er-copy: var(--color-emerald-900);

  --er-domain-0: var(--color-blue-500);
  --er-domain-1: var(--color-emerald-500);
  --er-domain-2: var(--color-violet-500);
  --er-domain-3: var(--color-orange-500);
  --er-domain-4: var(--color-pink-500);
  --er-domain-5: var(--color-amber-500);

  --er-row-pk: linear-gradient(90deg, oklch(from var(--color-orange-200) l c h / 0.7) 0%, oklch(from var(--color-orange-100) l c h / 0.3) 100%);
  --er-row-fk: linear-gradient(90deg, oklch(from var(--color-blue-100) l c h / 0.3) 0%, oklch(from var(--color-blue-200) l c h / 0.7) 100%);

  /* Layout sizing (unitless for SVG calculations) */
  --er-table-width: 200;
  --er-row-height: 24;
  --er-header-height: 32;
  --er-table-gap: 16;
  --er-domain-padding: 16;
  --er-domain-title-height: 24;
  --er-domain-gap: 20;
  --er-canvas-padding: 24;
}

.dark {
  --er-card: var(--color-gray-800);
  --er-card-header: var(--color-gray-900);
  --er-border: var(--color-gray-600);
  --er-text: var(--color-gray-100);
  --er-text-muted: var(--color-gray-400);
  --er-pk: var(--color-amber-300);
  --er-pk-soft: oklch(from var(--color-amber-900) l c h / 40%);
  --er-fk: var(--color-blue-300);
  --er-fk-soft: oklch(from var(--color-blue-900) l c h / 40%);
  --er-uk: var(--color-purple-300);
  --er-uk-soft: oklch(from var(--color-purple-900) l c h / 40%);
  --er-line: var(--color-gray-400);
  --er-line-pk: var(--color-orange-400);
  --er-line-fk: var(--color-blue-400);
  --er-comment: var(--color-blue-400);
  --er-example: var(--color-emerald-400);
  --er-copy: oklch(from var(--color-emerald-700) l c h / 70%);

  --er-domain-0: var(--color-blue-400);
  --er-domain-1: var(--color-emerald-400);
  --er-domain-2: var(--color-violet-400);
  --er-domain-3: var(--color-orange-400);
  --er-domain-4: var(--color-pink-400);
  --er-domain-5: var(--color-amber-400);

  --er-row-pk: linear-gradient(90deg, oklch(from var(--color-orange-900) l c h / 0.5) 0%, oklch(from var(--color-orange-800) l c h / 0.2) 100%);
  --er-row-fk: linear-gradient(90deg, oklch(from var(--color-blue-800) l c h / 0.2) 0%, oklch(from var(--color-blue-900) l c h / 0.5) 100%);
}

@utility er-row-pk {
  background: var(--er-row-pk);
}

@utility er-row-fk {
  background: var(--er-row-fk);
}

/* Table states via data attributes */
:is([data-er-table]) {
  transition: transform 200ms ease-out, box-shadow 200ms ease-out;
  box-shadow: var(--shadow-er-table);
}

:is([data-er-table][data-highlighted="true"]),
:is([data-er-table][data-selected="true"]) {
  transform: scale(1.02);
  box-shadow: var(--shadow-er-table-hover);
}

:is([data-er-table][data-selected="true"]) {
  outline: 2px solid var(--er-pk-soft);
  outline-offset: 2px;
}

/* Relationship line states */
:is([data-er-relation]) {
  stroke: var(--er-line);
  stroke-width: 2;
  fill: none;
  transition: stroke-width 200ms ease-out, opacity 200ms ease-out;
}

:is([data-er-relation][data-highlight-mode="fk"]) {
  stroke-width: 3;
  stroke: var(--er-line-fk);
}

:is([data-er-relation][data-highlight-mode="pk"]) {
  stroke-width: 3;
  stroke: var(--er-line-pk);
}

/* Canvas states */
:is([data-er-canvas]) {
  cursor: grab;
}

:is([data-er-canvas][data-dragging="true"]) {
  cursor: grabbing;
}

/* Domain boxes */
:is([data-er-domain]) {
  stroke-dasharray: 8 4;
  stroke-width: 2;
}

:is([data-er-domain="0"]) {
  --er-domain: var(--er-domain-0);
}

:is([data-er-domain="1"]) {
  --er-domain: var(--er-domain-1);
}

:is([data-er-domain="2"]) {
  --er-domain: var(--er-domain-2);
}

:is([data-er-domain="3"]) {
  --er-domain: var(--er-domain-3);
}

:is([data-er-domain="4"]) {
  --er-domain: var(--er-domain-4);
}

:is([data-er-domain="5"]) {
  --er-domain: var(--er-domain-5);
}
