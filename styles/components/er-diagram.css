/**
 * ER Diagram CSS Tokens
 *
 * Usage with Tailwind:
 *   bg-er-entity
 *   text-er-header
 *   border-er-border
 *   stroke-er-relation
 */

@theme inline {
  --color-er-entity: var(--er-entity);
  --color-er-entity-header: var(--er-entity-header);
  --color-er-border: var(--er-border);
  --color-er-text: var(--er-text);
  --color-er-text-muted: var(--er-text-muted);
  --color-er-pk: var(--er-pk);
  --color-er-pk-text: var(--er-pk-text);
  --color-er-fk: var(--er-fk);
  --color-er-fk-text: var(--er-fk-text);
  --color-er-uk: var(--er-uk);
  --color-er-uk-text: var(--er-uk-text);
  --color-er-relation: var(--er-relation);
  --color-er-relation-highlight-fk: var(--er-relation-highlight-fk);
  --color-er-relation-highlight-pk: var(--er-relation-highlight-pk);

  --shadow-er-table: var(--shadow-sm);
  --shadow-er-table-hover: var(--shadow-lg);
}

:root {
  --er-entity: var(--color-white);
  --er-entity-header: var(--color-gray-100);
  --er-border: var(--color-gray-300);
  --er-text: var(--color-gray-800);
  --er-text-muted: var(--color-gray-500);
  --er-pk: var(--color-amber-100);
  --er-pk-text: var(--color-amber-800);
  --er-fk: var(--color-blue-100);
  --er-fk-text: var(--color-blue-800);
  --er-uk: var(--color-purple-100);
  --er-uk-text: var(--color-purple-800);
  --er-relation: var(--color-gray-500);
  --er-relation-highlight-fk: var(--color-blue-500);
  --er-relation-highlight-pk: var(--color-orange-500);
}

.dark {
  --er-entity: var(--color-gray-800);
  --er-entity-header: var(--color-gray-900);
  --er-border: var(--color-gray-600);
  --er-text: var(--color-gray-100);
  --er-text-muted: var(--color-gray-400);
  --er-pk: oklch(from var(--color-amber-900) l c h / 40%);
  --er-pk-text: var(--color-amber-300);
  --er-fk: oklch(from var(--color-blue-900) l c h / 40%);
  --er-fk-text: var(--color-blue-300);
  --er-uk: oklch(from var(--color-purple-900) l c h / 40%);
  --er-uk-text: var(--color-purple-300);
  --er-relation: var(--color-gray-400);
  --er-relation-highlight-fk: var(--color-blue-400);
  --er-relation-highlight-pk: var(--color-orange-400);
}

/* Table states via data attributes */
:is([data-er-table]) {
  transition: transform 200ms ease-out, box-shadow 200ms ease-out;
  box-shadow: var(--shadow-er-table);
}

:is([data-er-table][data-highlighted="true"]),
:is([data-er-table][data-selected="true"]) {
  transform: scale(1.02);
  box-shadow: var(--shadow-er-table-hover);
}

:is([data-er-table][data-selected="true"]) {
  outline: 2px solid var(--er-pk);
  outline-offset: 2px;
}

/* Relationship line states */
:is([data-er-relation]) {
  stroke: var(--er-relation);
  stroke-width: 2;
  fill: none;
  transition: stroke-width 200ms ease-out, opacity 200ms ease-out;
}

:is([data-er-relation][data-highlight-mode="fk"]) {
  stroke-width: 3;
  stroke: var(--er-relation-highlight-fk);
}

:is([data-er-relation][data-highlight-mode="pk"]) {
  stroke-width: 3;
  stroke: var(--er-relation-highlight-pk);
}

/* Fill colors for markers */
.fill-er-relation {
  fill: var(--er-relation);
}

.fill-er-relation-highlight-fk {
  fill: var(--er-relation-highlight-fk);
}

.fill-er-relation-highlight-pk {
  fill: var(--er-relation-highlight-pk);
}

/* Row highlight gradients */
.er-row-highlight-pk {
  background: linear-gradient(90deg,
    oklch(from var(--color-orange-200) l c h / 0.7) 0%,
    oklch(from var(--color-orange-100) l c h / 0.3) 100%
  );
}

.er-row-highlight-fk {
  background: linear-gradient(90deg,
    oklch(from var(--color-blue-100) l c h / 0.3) 0%,
    oklch(from var(--color-blue-200) l c h / 0.7) 100%
  );
}

.dark .er-row-highlight-pk {
  background: linear-gradient(90deg,
    oklch(from var(--color-orange-900) l c h / 0.5) 0%,
    oklch(from var(--color-orange-800) l c h / 0.2) 100%
  );
}

.dark .er-row-highlight-fk {
  background: linear-gradient(90deg,
    oklch(from var(--color-blue-800) l c h / 0.2) 0%,
    oklch(from var(--color-blue-900) l c h / 0.5) 100%
  );
}

/* Canvas states */
:is([data-er-canvas]) {
  cursor: grab;
}

:is([data-er-canvas][data-dragging="true"]) {
  cursor: grabbing;
}
