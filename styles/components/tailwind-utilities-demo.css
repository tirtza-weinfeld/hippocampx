/* =============================================================================
   Tailwind 4 Custom Utilities Demo
   Teaching @utility capabilities with OKLCH colors
   ============================================================================= */

/* =============================================================================
   1. SIMPLE UTILITIES — Complex with nesting
   Use when you need multiple properties or pseudo-elements
   ============================================================================= */
@source "../../components/notes/tailwind/**/*.tsx";
@source "../../app/notes/tailwind/**/*.{tsx,mdx}";

@utility scrollbar-hidden {
  scrollbar-width: none;

  &::-webkit-scrollbar {
    display: none;
  }
}

@utility scrollbar-styled {
  scrollbar-width: thin;
  scrollbar-color: oklch(0.6 0.1 250) oklch(0.95 0.01 250);

  &::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  &::-webkit-scrollbar-track {
    background: oklch(0.95 0.01 250);
    border-radius: 4px;
  }

  &::-webkit-scrollbar-thumb {
    background: oklch(0.6 0.1 250);
    border-radius: 4px;

    &:hover {
      background: oklch(0.5 0.12 250);
    }
  }
}

@utility focus-ring-gradient {
  outline: none;

  &:focus-visible {
    outline: 2px solid transparent;
    outline-offset: 2px;
    box-shadow:
      0 0 0 2px oklch(0.98 0 0),
      0 0 0 4px oklch(0.65 0.2 250);
  }
}

/* =============================================================================
   2. FUNCTIONAL UTILITIES — Accept arguments via wildcard *
   The * must be at the end of the utility name
   ============================================================================= */

/* Theme tokens for functional utilities */
@theme {
  /* Tab sizes */
  --tab-size-2: 2;
  --tab-size-4: 4;
  --tab-size-8: 8;
  --tab-size-github: 8;

  /* Aspect ratios */
  --aspect-square: 1;
  --aspect-video: 16/9;
  --aspect-photo: 4/3;
  --aspect-portrait: 3/4;
  --aspect-cinema: 21/9;

  /* Semantic surface colors using OKLCH */
  --color-surface-critical: oklch(0.55 0.22 25);
  --color-surface-warning: oklch(0.75 0.18 85);
  --color-surface-success: oklch(0.55 0.18 145);
  --color-surface-info: oklch(0.55 0.18 250);
  --color-surface-muted: oklch(0.7 0.02 260);

  /* Status colors for semantic patterns */
  --color-status-critical: oklch(0.55 0.22 25);
  --color-status-warning: oklch(0.75 0.18 85);
  --color-status-success: oklch(0.55 0.18 145);
  --color-status-info: oklch(0.55 0.18 250);

  /* Glow colors */
  --color-glow-brand: oklch(0.65 0.25 250);
  --color-glow-success: oklch(0.6 0.2 145);
  --color-glow-warning: oklch(0.7 0.2 85);
  --color-glow-critical: oklch(0.55 0.22 25);

  /* Text size scale with line heights */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 1.875rem;
  --text-4xl: 2.25rem;

  /* Line heights */
  --leading-none: 1;
  --leading-tight: 1.25;
  --leading-snug: 1.375;
  --leading-normal: 1.5;
  --leading-relaxed: 1.625;
  --leading-loose: 2;

  /* Opacity scale for functional opacity utility */
  --opacity-0: 0;
  --opacity-10: 0.1;
  --opacity-25: 0.25;
  --opacity-50: 0.5;
  --opacity-75: 0.75;
  --opacity-90: 0.9;
  --opacity-100: 1;

  /* Inset scale */
  --inset-0: 0px;
  --inset-1: 0.25rem;
  --inset-2: 0.5rem;
  --inset-4: 1rem;
  --inset-8: 2rem;
}

/* =============================================================================
   3. MATCHING THEME VALUES — --value(--theme-key-*)
   Resolves utility value against a set of theme keys
   ============================================================================= */

/* Tab size utility matching theme tokens */
@utility tab-* {
  tab-size: --value(--tab-size-*);
}
/* Usage: tab-2, tab-4, tab-github */

/* Surface utility with gradient using theme colors */
@utility surface-* {
  --_surface-base: --value(--color-surface-*);

  background: linear-gradient(
    145deg,
    var(--_surface-base),
    oklch(from var(--_surface-base) calc(l - 0.1) c h)
  );
  color: oklch(from var(--_surface-base) calc(l + 0.45) 0.02 h);
  border: 1px solid oklch(from var(--_surface-base) calc(l - 0.15) calc(c + 0.05) h / 0.4);
}
/* Usage: surface-critical, surface-success, surface-info */

/* Status badge with OKLCH relative colors */
@utility badge-* {
  --_badge-color: --value(--color-status-*);

  display: inline-flex;
  align-items: center;
  gap: 0.375rem;
  padding: 0.25rem 0.625rem;
  font-size: 0.75rem;
  font-weight: 500;
  border-radius: 9999px;
  background: oklch(from var(--_badge-color) calc(l + 0.35) calc(c * 0.4) h / 0.9);
  color: oklch(from var(--_badge-color) calc(l - 0.25) calc(c + 0.1) h);
  border: 1px solid oklch(from var(--_badge-color) l calc(c * 0.5) h / 0.3);
}
/* Usage: badge-critical, badge-warning, badge-success, badge-info */

/* Glow effect utility */
@utility glow-* {
  --_glow-color: --value(--color-glow-*);

  box-shadow:
    0 0 15px oklch(from var(--_glow-color) l c h / 0.4),
    0 0 30px oklch(from var(--_glow-color) l c h / 0.2),
    0 4px 12px oklch(0 0 0 / 0.15);
}
/* Usage: glow-brand, glow-success, glow-warning */

/* =============================================================================
   4. BARE VALUES — --value({type})
   Validates against CSS data types: number, integer, ratio, percentage
   ============================================================================= */

/* Integer-based tab size (tab-1, tab-12, tab-76) */
@utility tabs-* {
  tab-size: --value(integer);
}
/* Usage: tabs-1, tabs-4, tabs-8 (any integer) */

/* Column count utility */
@utility cols-* {
  column-count: --value(integer);
}
/* Usage: cols-2, cols-3, cols-4 */

/* Z-index utility with integers */
@utility layer-* {
  z-index: --value(integer);
}
/* Usage: layer-10, layer-50, layer-100 */

/* Order utility */
@utility ord-* {
  order: --value(integer);
}
/* Usage: ord-1, ord-2, ord--1 (negative needs separate utility) */

/* =============================================================================
   5. LITERAL VALUES — --value('literal')
   Supports exact string matches (notice the quotes)
   ============================================================================= */

/* Tab size with literal CSS keywords */
@utility tabmode-* {
  tab-size: --value("inherit", "initial", "unset");
}
/* Usage: tabmode-inherit, tabmode-initial, tabmode-unset */

/* Overflow control with literals */
@utility clip-* {
  overflow: --value("visible", "hidden", "clip", "scroll", "auto");
}
/* Usage: clip-visible, clip-hidden, clip-scroll, clip-auto */

/* Text wrap modes */
@utility wrap-* {
  text-wrap: --value("wrap", "nowrap", "balance", "pretty", "stable");
}
/* Usage: wrap-balance, wrap-pretty, wrap-stable */

/* Content visibility */
@utility vis-* {
  content-visibility: --value("visible", "hidden", "auto");
}
/* Usage: vis-visible, vis-hidden, vis-auto */

/* =============================================================================
   6. ARBITRARY VALUES — --value([{type}])
   Square brackets support any value of the specified type
   ============================================================================= */

/* Tab size with arbitrary integers */
@utility tabx-* {
  tab-size: --value([integer]);
}
/* Usage: tabx-[3], tabx-[12] */

/* Custom gap with arbitrary length */
@utility space-* {
  gap: --value([length]);
}
/* Usage: space-[1.5rem], space-[24px], space-[2vw] */

/* Custom border radius with arbitrary length */
@utility curve-* {
  border-radius: --value([length]);
}
/* Usage: curve-[0.5rem], curve-[12px], curve-[50%] */

/* Opacity with arbitrary percentage */
@utility fade-* {
  opacity: --value([percentage]);
}
/* Usage: fade-[50%], fade-[75%], fade-[33%] */

/* =============================================================================
   7. COMBINING MULTIPLE VALUE TYPES
   Theme + bare + arbitrary can coexist in the same utility
   ============================================================================= */

/* Option A: Multiple declarations (any that fail to resolve are omitted) */
@utility opaque-* {
  opacity: --value([percentage]);
  opacity: calc(--value(integer) * 1%);
  opacity: --value(--opacity-*);
}
/* Usage: opaque-50 (theme), opaque-[75%] (arbitrary), opaque-33 (bare → 33%) */

/* Option B: Single --value() with multiple arguments (left to right resolution) */
@utility alpha-* {
  opacity: --value(--opacity-*, integer, [percentage]);
}
/* Usage: alpha-50 (theme), alpha-[80%] (arbitrary) */

/* Complete tab utility supporting all value types */
@utility indent-* {
  tab-size: --value(--tab-size-*, integer, [integer]);
}
/* Usage: indent-github (theme), indent-6 (bare), indent-[16] (arbitrary) */

/* Full aspect ratio utility */
@utility ratio-* {
  aspect-ratio: --value(--aspect-*, ratio, [ratio]);
}
/* Usage: ratio-square, ratio-video, ratio-3/4, ratio-[7/9] */

/* =============================================================================
   8. NEGATIVE VALUES
   Register separate positive and negative utilities
   ============================================================================= */

/* Positive inset */
@utility push-* {
  inset: --spacing(--value(integer));
  inset: --value([percentage], [length]);
}
/* Usage: push-4, push-8, push-[2rem] */

/* Negative inset (note the leading dash in utility name) */
@utility -push-* {
  inset: calc(--spacing(--value(integer)) * -1);
  inset: calc(--value([percentage], [length]) * -1);
}
/* Usage: -push-4, -push-8, -push-[2rem] */

/* Positive translate X */
@utility slide-x-* {
  transform: translateX(--spacing(--value(integer)));
  transform: translateX(--value([length], [percentage]));
}

/* Negative translate X */
@utility -slide-x-* {
  transform: translateX(calc(--spacing(--value(integer)) * -1));
  transform: translateX(calc(--value([length], [percentage]) * -1));
}
/* Usage: slide-x-4, -slide-x-4, slide-x-[100%], -slide-x-[50%] */

/* Positive rotate */
@utility spin-* {
  transform: rotate(calc(--value(integer) * 1deg));
  transform: rotate(--value([angle]));
}

/* Negative rotate */
@utility -spin-* {
  transform: rotate(calc(--value(integer) * -1deg));
  transform: rotate(calc(--value([angle]) * -1));
}
/* Usage: spin-45, -spin-90, spin-[30deg], -spin-[15deg] */

/* =============================================================================
   9. MODIFIERS — --modifier()
   Works like --value() but operates on modifiers (after the slash)
   ============================================================================= */

/* Text size with line height modifier */
@utility type-* {
  font-size: --value(--text-*, [length]);
  line-height: --modifier(--leading-*, [length], [*]);
}
/* Usage: type-lg/relaxed, type-xl/tight, type-base/1.8, type-[1.25rem]/[1.6] */

/* Background opacity with modifier */
@utility bg-tint-* {
  --_tint-color: --value(--color-surface-*);
  --_tint-alpha: --modifier(integer);

  background: oklch(from var(--_tint-color) l c h / calc(var(--_tint-alpha, 100) * 1%));
}
/* Usage: bg-tint-info/50, bg-tint-success/25, bg-tint-critical/75 */

/* Border with width modifier */
@utility edge-* {
  --_edge-color: --value(--color-surface-*);
  --_edge-width: --modifier(integer, [length]);

  border: var(--_edge-width, 1px) solid var(--_edge-color);
}
/* Usage: edge-critical/2, edge-success/[3px], edge-info */

/* Grid columns with gap modifier */
@utility grid-cols-* {
  display: grid;
  grid-template-columns: repeat(--value(integer), minmax(0, 1fr));
  gap: --modifier([length]);
}
/* Usage: grid-cols-3/[1rem], grid-cols-4/[24px] */

/* =============================================================================
   10. FRACTIONS — ratio data type
   Treats value and modifier as a single value for fractions
   ============================================================================= */

/* Aspect ratio with fraction support */
@utility frame-* {
  aspect-ratio: --value(--aspect-*, ratio, [ratio]);
}
/* Usage: frame-square, frame-video, frame-3/4, frame-16/9, frame-[21/9] */

/* Width as fraction of parent */
@utility span-* {
  width: calc(--value(ratio) * 100%);
}
/* Usage: span-1/2 (50%), span-2/3 (66.67%), span-3/4 (75%) */

/* Flex basis with fractions */
@utility basis-* {
  flex-basis: calc(--value(ratio, [percentage]) * 100%);
}
/* Usage: basis-1/3, basis-2/5, basis-[40%] */

