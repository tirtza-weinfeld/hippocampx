
/* Control state variants */
@custom-variant selected (&:where([data-state="selected"]));
@custom-variant success (&:where([data-state="success"]));
@custom-variant error (&:where([data-state="error"]));

/* Control state defaults - define in :root first for var() access */
:root {
  --color-error: var(--color-red-500);
  --gradient-error: linear-gradient(135deg, var(--color-red-500), var(--color-rose-400), var(--color-pink-400));
  --color-success: var(--color-emerald-500);
  --gradient-success: linear-gradient(135deg, var(--color-emerald-500), var(--color-teal-400), var(--color-cyan-400));

}


@theme inline {
  --color-error: var(--color-error);
  --gradient-error: var(--gradient-error);
  --color-success: var(--color-success);
  --gradient-success: var(--gradient-success);
  --animate-error: control-shake 0.4s cubic-bezier(0.36, 0.07, 0.19, 0.97);
  --animate-success: control-celebrate 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes control-shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-6px); }
  40% { transform: translateX(6px); }
  60% { transform: translateX(-4px); }
  80% { transform: translateX(4px); }
}

@keyframes control-celebrate {
  0% { transform: scale(1); }
  25% { transform: scale(1.08) rotate(-2deg); }
  50% { transform: scale(1.1) rotate(2deg); }
  75% { transform: scale(1.04) rotate(-1deg); }
  100% { transform: scale(1); }
}

 /* @utility animate-control{
   animation: var(--control-animate);
 } */

/* Control gradient - sets control variables, applies background + animation + glow */
/* Usage: control-gradient-fm-term, control-gradient-fm-error/20 */
@utility control-gradient-* {
  --control-color: --value(--color-*);
  --control-gradient: --value(--gradient-*);
  --control-foreground-gradient: --value(--foreground-gradient-*);
  --control-gradient-weight: --modifier(integer, [*]);

  position: relative;
  isolation: isolate;
  animation: var(--control-animate);

  /* Text gradient - falls back to --control-gradient if no foreground-gradient defined */
  background:  var(--control-gradient);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
   
  box-shadow:
    0 0 1.5rem oklch(from var(--control-color) l c h / calc(var(--control-glow, 0) * 1%)),
    0 0 3rem oklch(from var(--control-color) l c h / calc(var(--control-glow, 0) * 0.6%));

  &::before {
    content: "";
    position: absolute;
    inset: 0;
    z-index: -1;
    border-radius: inherit;
    background: var(--control-gradient);
    opacity: calc(var(--control-gradient-weight, 100) / 100);
    pointer-events: none;
  }
}

/* Control glow - reads --control-color */
/* Usage: control-glow, control-glow/30 */
@utility control-glow {
  --_glow-intensity: --modifier(integer, [*]);
  box-shadow:
    0 0 1.5rem oklch(from var(--control-color) l c h / calc(var(--_glow-intensity, 25) / 100)),
    0 0 3rem oklch(from var(--control-color) l c h / calc(var(--_glow-intensity, 25) / 100 * 0.6));
}

/* Control ring - reads --control-color */
/* Usage: control-ring */
@utility control-ring {
  outline: 2px solid var(--control-color);
  outline-offset: 2px;
}

/* Control selected - overrides control vars on selected state */
/* Usage: control-selected-fm-term/15 */
@utility control-selected-* {
  &[data-state="selected"] {
    --control-color: --value(--color-*);
    --control-gradient: --value(--gradient-*);
    --control-animate: --value(--animate-*);
    --control-gradient-weight: --modifier(integer, [*]);
    --control-glow: 25;
  }
}

@utility control-error-* {
  &[data-state="error"] {
    --control-color: --value(--color-*);
    --control-gradient: --value(--gradient-*);
    --control-animate: --value(--animate-*);
    --control-gradient-weight: --modifier(integer, [*]);
    --control-glow: 25;
  }
}

@utility control-success-* {
  &[data-state="success"] {
    --control-color: --value(--color-*);
    --control-gradient: --value(--gradient-*);
    --control-animate: --value(--animate-*);
    --control-gradient-weight: --modifier(integer, [*]);
    --control-glow: 0;
  }
}



